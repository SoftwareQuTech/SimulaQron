
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SimulaQron.virtNode.quantum &#8212; SimulaQron 1.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">SimulaQron 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for SimulaQron.virtNode.quantum</h1><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1"># Copyright (c) 2017, Stephanie Wehner and Axel Dahlberg</span>
<span class="c1"># All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Redistribution and use in source and binary forms, with or without</span>
<span class="c1"># modification, are permitted provided that the following conditions are met:</span>
<span class="c1"># 1. Redistributions of source code must retain the above copyright</span>
<span class="c1">#    notice, this list of conditions and the following disclaimer.</span>
<span class="c1"># 2. Redistributions in binary form must reproduce the above copyright</span>
<span class="c1">#    notice, this list of conditions and the following disclaimer in the</span>
<span class="c1">#    documentation and/or other materials provided with the distribution.</span>
<span class="c1"># 3. All advertising materials mentioning features or use of this software</span>
<span class="c1">#    must display the following acknowledgement:</span>
<span class="c1">#    This product includes software developed by Stephanie Wehner, QuTech.</span>
<span class="c1"># 4. Neither the name of the QuTech organization nor the</span>
<span class="c1">#    names of its contributors may be used to endorse or promote products</span>
<span class="c1">#    derived from this software without specific prior written permission.</span>
<span class="c1">#</span>
<span class="c1"># THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER &#39;&#39;AS IS&#39;&#39; AND ANY</span>
<span class="c1"># EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</span>
<span class="c1"># WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
<span class="c1"># DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY</span>
<span class="c1"># DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
<span class="c1"># (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span>
<span class="c1"># LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
<span class="c1"># ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="c1"># (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</span>
<span class="c1"># SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">SimulaQron</span> <span class="k">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">SimulaQron.virtNode.crudeSimulator</span> <span class="k">import</span> <span class="n">simpleEngine</span>
<span class="kn">from</span> <span class="nn">twisted.spread</span> <span class="k">import</span> <span class="n">pb</span>
<span class="kn">from</span> <span class="nn">twisted.internet.defer</span> <span class="k">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">logging</span>

<div class="viewcode-block" id="simulatedQubit"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit">[docs]</a><span class="k">class</span> <span class="nc">simulatedQubit</span><span class="p">(</span><span class="n">pb</span><span class="o">.</span><span class="n">Referenceable</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Simulated qubit object in the specified local simulation engine.</span>

<span class="sd">	- **Arguments**</span>
<span class="sd">		:node:		network node that this qubit lives at</span>
<span class="sd">		:register:	register on that node that the qubit is in</span>

<span class="sd">	.. note::</span>
<span class="sd">		Qubit objects are local to each node that is simulating a particular quantum register.</span>
<span class="sd">		A qubit object provides the backing for a virtual qubit, which may be at another node.</span>
<span class="sd">	&quot;&quot;&quot;</span>


	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">register</span><span class="p">,</span> <span class="n">simNum</span><span class="p">,</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
			<span class="c1"># Node where this qubit is located</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="o">=</span> <span class="n">node</span>

		<span class="c1"># Register where this qubit is simulated</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span> <span class="o">=</span> <span class="n">register</span>

		<span class="c1"># Number in the register, if known</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>

		<span class="c1"># Number of the simulated qubit, unique at each virtual node</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">simNum</span> <span class="o">=</span> <span class="n">simNum</span>

		<span class="c1"># Lock marshalling access to this qubit</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">DeferredLock</span><span class="p">()</span>

		<span class="c1"># Mark this qubit as active (still connected to a register)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>

		<span class="c1"># Optional parameters for when the simulation is noise</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">noisy</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">Settings</span><span class="o">.</span><span class="n">CONF_NOISY_QUBITS</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">T1</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">Settings</span><span class="o">.</span><span class="n">CONF_T1</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">last_accessed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<div class="viewcode-block" id="simulatedQubit.lock"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.lock">[docs]</a>	<span class="k">def</span> <span class="nf">lock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span></div>
<div class="viewcode-block" id="simulatedQubit.remote_lock"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_lock">[docs]</a>	<span class="k">def</span> <span class="nf">remote_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span></div>
<div class="viewcode-block" id="simulatedQubit.unlock"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.unlock">[docs]</a>	<span class="k">def</span> <span class="nf">unlock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>
<div class="viewcode-block" id="simulatedQubit.remote_unlock"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_unlock">[docs]</a>	<span class="k">def</span> <span class="nf">remote_unlock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>
<div class="viewcode-block" id="simulatedQubit.isLocked"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.isLocked">[docs]</a>	<span class="k">def</span> <span class="nf">isLocked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">locked</span></div>
<div class="viewcode-block" id="simulatedQubit.remote_isLocked"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_isLocked">[docs]</a>	<span class="k">def</span> <span class="nf">remote_isLocked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">locked</span></div>
<div class="viewcode-block" id="simulatedQubit.remote_isActive"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_isActive">[docs]</a>	<span class="k">def</span> <span class="nf">remote_isActive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span></div>

<div class="viewcode-block" id="simulatedQubit.make_fresh"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.make_fresh">[docs]</a>	<span class="k">def</span> <span class="nf">make_fresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Make this a fresh qubit.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Create a fresh qubit in the |0&gt; state</span>
		<span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">add_fresh_qubit</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>

		<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;QUANTUM </span><span class="si">%s</span><span class="s2">: Adding qubit number </span><span class="si">%d</span><span class="s2"> to register </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_apply_X"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_apply_X">[docs]</a>	<span class="k">def</span> <span class="nf">remote_apply_X</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Apply X gate to itself by passing it onto the underlying register.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: applying X to number </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_X</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_apply_K"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_apply_K">[docs]</a>	<span class="k">def</span> <span class="nf">remote_apply_K</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Apply K gate to itself by passing it onto the underlying register. Maps computational to Y eigenbasis.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: applying K to number </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_K</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_apply_Y"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_apply_Y">[docs]</a>	<span class="k">def</span> <span class="nf">remote_apply_Y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Apply Y gate.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: applying Y to number </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_Y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_apply_Z"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_apply_Z">[docs]</a>	<span class="k">def</span> <span class="nf">remote_apply_Z</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Apply Z gate.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: applying Z to number </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_Z</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_apply_H"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_apply_H">[docs]</a>	<span class="k">def</span> <span class="nf">remote_apply_H</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Apply H gate.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: applying H to number </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_H</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_apply_T"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_apply_T">[docs]</a>	<span class="k">def</span> <span class="nf">remote_apply_T</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Apply T gate.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: applying T to number </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_T</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_apply_rotation"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_apply_rotation">[docs]</a>	<span class="k">def</span> <span class="nf">remote_apply_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Apply rotation around axis n with angle a.</span>
<span class="sd">		Arguments:</span>
<span class="sd">		n	A tuple of three numbers specifying the rotation axis, e.g n=(1,0,0)</span>
<span class="sd">		a	The rotation angle in radians.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">n</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
		<span class="n">a</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: applying rotation to number </span><span class="si">%d</span><span class="s2">. Axis=</span><span class="si">%s</span><span class="s2">,angle=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">n</span><span class="p">)),</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_rotation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">a</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_measure_inplace"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_measure_inplace">[docs]</a>	<span class="k">def</span> <span class="nf">remote_measure_inplace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Measure the qubit in the standard basis. This does NOT delete the qubit, but replace the relevant</span>
<span class="sd">		qubit with the measurement outcome.</span>

<span class="sd">		Returns the measurement outcome.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="n">outcome</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">measure_qubit_inplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">outcome</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_measure"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_measure">[docs]</a>	<span class="k">def</span> <span class="nf">remote_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Measure the qubit in the standard basis. This does delete the qubit.</span>

<span class="sd">		Returns the measurement outcome.</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="c1"># Measure the qubit</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="n">outcome</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">measure_qubit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">outcome</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_cnot_onto"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_cnot_onto">[docs]</a>	<span class="k">def</span> <span class="nf">remote_cnot_onto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">targetNum</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Performs a CNOT operation with this qubit as control, and the other qubit as target.</span>

<span class="sd">		Arguments</span>
<span class="sd">		targetNum	the qubit to use as the target of the CNOT</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: CNOT from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">,</span> <span class="n">targetNum</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_CNOT</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">,</span> <span class="n">targetNum</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_cphase_onto"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_cphase_onto">[docs]</a>	<span class="k">def</span> <span class="nf">remote_cphase_onto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">targetNum</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Performs a CPHASE operation with this qubit as control, and the other qubit as target.</span>

<span class="sd">		Arguments</span>
<span class="sd">		targetNum	the qubit to use as the target of the CPHASE</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_apply_random_pauli_noise</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_CPHASE</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">,</span> <span class="n">targetNum</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_get_sim_number"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_get_sim_number">[docs]</a>	<span class="k">def</span> <span class="nf">remote_get_sim_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Returns the simulation number of this qubit.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simNum</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_get_number"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_get_number">[docs]</a>	<span class="k">def</span> <span class="nf">remote_get_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Returns the local number of this qubit.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_get_register"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_get_register">[docs]</a>	<span class="k">def</span> <span class="nf">remote_get_register</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Returns the register where this qubit is simulated.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">register</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_get_numbers"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_get_numbers">[docs]</a>	<span class="k">def</span> <span class="nf">remote_get_numbers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Returns the number of the simulating register.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_get_qubit"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_get_qubit">[docs]</a>	<span class="k">def</span> <span class="nf">remote_get_qubit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Returns the state of the qubits in the list qList by tracing out the rest.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: Returning qubit </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">get_qubits_RI</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">])</span></div>

<div class="viewcode-block" id="simulatedQubit.remote_get_details"><a class="viewcode-back" href="../../../SimulaQron.virtNode.html#SimulaQron.virtNode.quantum.simulatedQubit.remote_get_details">[docs]</a>	<span class="k">def</span> <span class="nf">remote_get_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Returns out simulation number as well as the details of this simulating node.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simNum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

	<span class="k">def</span> <span class="nf">_apply_random_pauli_noise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Applies random pauli gate if required</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">noisy</span><span class="p">:</span>
			<span class="k">return</span>
		<span class="c1"># Assumes qubit is locked and active</span>
		<span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_accessed</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">last_accessed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
		<span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">t</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">4</span>
		<span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">:</span>
			<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: random pauli X applied on </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_X</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">p</span><span class="p">:</span>
			<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: random pauli Y applied on </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_Y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">*</span><span class="n">p</span><span class="p">:</span>
			<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;VIRTUAL NODE </span><span class="si">%s</span><span class="s2">: random pauli Z applied on </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="o">.</span><span class="n">apply_Z</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">SimulaQron 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Stephanie Wehner and Axel Dahlberg.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.4.
    </div>
  </body>
</html>